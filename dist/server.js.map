{"version":3,"sources":["../server/server.js"],"names":["require","internals","module","exports","init","opts","app","set","use","secret","name","proxy","resave","saveUninitialized","duration","activeDuration","maxAge","BodyParser","json","urlencoded","extended","err","req","res","next","console","error","listen","port","info"],"mappings":";;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AAEA;;AAEA;;;;;;AAfAA,QAAQ,qBAAR;AACAA,QAAQ,gBAAR;AAMA;;;AAWA,IAAIC,YAAY,EAAhB;;AAEAC,OAAOC,OAAP,CAAeC,IAAf,GAAsB,UAACC,IAAD,EAAU;AAC5B,QAAMC,MAAML,UAAUK,GAAV,GAAgB,wBAA5B;;AAEAA,QAAIC,GAAJ,CAAQ,aAAR,EAAuB,CAAvB;AACAD,QAAIE,GAAJ,CAAQ,6BAAQ;AACZC,gBAAQ,KADI;AAEZC,cAAM,MAFM;AAGZC,eAAO,IAHK;AAIZC,gBAAQ,IAJI;AAKZC,2BAAmB,IALP;AAMZC,kBAAU,KAAK,EAAL,GAAU,IANR;AAOZC,wBAAgB,IAAI,EAAJ,GAAS,IAPb;AAQZC,gBAAQ;AARI,KAAR,CAAR;;AAWA;AACAV,QAAIE,GAAJ,CAAQ,uBAAR;;AAEA;AACAF,QAAIE,GAAJ,CAAQ,qBAAR;;AAEAF,QAAIE,GAAJ,CAAQ,6BAAR;;AAEA;AACAF,QAAIE,GAAJ,CAAQS,qBAAWC,IAAX,EAAR;AACAZ,QAAIE,GAAJ,CAAQS,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;;AAEAd,QAAIE,GAAJ,CAAQ,sBAAOH,IAAP,CAAR;;AAEAC,QAAIE,GAAJ,CAAQ,UAASa,GAAT,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AAClCC,gBAAQC,KAAR,CAAcL,GAAd;AACH,KAFD;;AAIAf,QAAIqB,MAAJ,CAAWtB,KAAKuB,IAAhB,EAAsB,iBAAS;AAC3BF,gBAEID,QAAQC,KAAR,CAAcA,KAAd,CAFJ,GAGID,QAAQI,IAAR,wBAAkCxB,KAAKuB,IAAvC,iCAAuEvB,KAAKuB,IAA5E,wBAHJ;AAIH,KALD;AAMH,CAvCD","file":"server.js","sourcesContent":["require('babel-core/register')\r\nrequire('babel-polyfill')\r\nimport Path from 'path'\r\nimport Express from 'express'\r\nimport Helmet from 'helmet'\r\nimport BodyParser from 'body-parser'\r\nimport Cors from 'cors'\r\n// import Session from 'express-session'\r\nimport Session from 'cookie-session'\r\nimport CookieParser from 'cookie-parser'\r\n\r\nimport favicon from 'serve-favicon'\r\n\r\nimport { promisify as Promisify } from 'util'\r\n\r\nimport Routes from './routes'\r\n\r\n\r\nlet internals = {}\r\n\r\nmodule.exports.init = (opts) => {\r\n    const app = internals.app = Express()\r\n          \r\n    app.set('trust proxy', 1) \r\n    app.use(Session({\r\n        secret: 'key',\r\n        name: 'name',\r\n        proxy: true,\r\n        resave: true,\r\n        saveUninitialized: true,\r\n        duration: 30 * 60 * 1000,\r\n        activeDuration: 5 * 60 * 1000,\r\n        maxAge: 3600000,\r\n    }))\r\n\r\n    // secure apps by setting various HTTP headers\r\n    app.use(Helmet())\r\n\r\n    // enable CORS - Cross Origin Resource Sharing\r\n    app.use(Cors())\r\n\r\n    app.use(CookieParser())\r\n\r\n    // parse body params and attache them to req.body\r\n    app.use(BodyParser.json())\r\n    app.use(BodyParser.urlencoded({ extended: true }))\r\n\r\n    app.use(Routes(opts))\r\n    \r\n    app.use(function(err, req, res, next) {\r\n        console.error(err)\r\n    })\r\n\r\n    app.listen(opts.port, error => {\r\n        error\r\n            ?\r\n            console.error(error) :\r\n            console.info(`Listening on port ${opts.port}. Visit http://localhost:${opts.port}/ in your browser.`)\r\n    })\r\n}\r\n"]}